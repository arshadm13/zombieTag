/*!
 *  Licensed Materials - Property of IBM
 *  (C) Copyright IBM Corp. 2013, 2014. All Rights Reserved.
 *  US Government Users Restricted Rights - Use, duplication or
 *  disclosure restricted by GSA ADP Schedule Contract with IBM Corp.
 *
 *  IBM Mobile Cloud Services, 
 *  IBMPush Service JavaScript SDK v1.0.0.20150409-1328
 *
 */
(function(a,b){var c=!("function"!=typeof define||!define.amd),d="object"==typeof exports,e=(d?require:function(a){throw new Error("IBMPush SDK detected missing dependency: '"+a+"' - in a non-nodejs runtime. All it's binding variables were 'undefined'.")},function(){/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
var a,c,d;return function(b){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(a,c){return function(){return n.apply(b,v.call(arguments,0).concat([a,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(a){if(e(r,a)){var c=r[a];delete r[a],t[a]=!0,m.apply(b,c)}if(!e(q,a)&&!e(t,a))throw new Error("No "+a);return q[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(a,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||a,"undefined"===v||"function"===v){for(c=!c.length&&d.length?["require","exports","module"]:c,n=0;n<c.length;n+=1)if(m=o(c[n],f),k=m.f,"require"===k)u[n]=p.require(a);else if("exports"===k)u[n]=p.exports(a),s=!0;else if("module"===k)h=u[n]=p.module(a);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(a+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[a],u):void 0,a&&(h&&h.exports!==b&&h.exports!==q[a]?q[a]=h.exports:l===b&&s||(q[a]=l))}else a&&(q[a]=d)},a=c=n=function(a,c,d,e,f){if("string"==typeof a)return p[a]?p[a](c):j(o(a,c).f);if(!a.splice){if(s=a,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(a=c,c=d,d=null):a=b}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(b,a,c,d):setTimeout(function(){m(b,a,c,d)},4),n},n.config=function(a){return n(a)},a._defined=q,d=function(a,b,c){b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},d.amd={jQuery:!0}}(),d("almond",function(){}),d("ibm/mobile/service/_IBMPush",["require","exports","module"],function(a,b,c){var d={VERSION:"1.0.0.20150409-1328",_push:null,logger:null,initializeService:function(a){return this._init(a)},getVersion:function(){return this.VERSION},getService:function(){if(!_.isObject(this._push))throw new IBMError("Push Service not initialized. Call initializeService()");return this._push}};return d}),d("ibm/mobile/service/push/IBMPushService",["require","exports","module"],function(a,b,c){function d(a){var b=new IBMUriBuilder(IBMBluemix.getConfig().getBaaSURL());b.slash().append("push").slash().append("v1").slash().append("apps").slash(),b.append(IBMBluemix.config.getApplicationId()).slash(),this.endpoint=b.toString(),this.req=a}return d.prototype={constructor:d,createTag:function(a,b){var c={name:a,description:b},d=new IBMUriBuilder(this.endpoint).append("tags").toString(),e={data:JSON.stringify(c),handleAs:"json",contentType:"json",timeout:3e4},f=Q.defer();return IBMHttpRequest.post(d,e,this.req).then(function(a){console.log("Successfully completed the Create tag operation"),f.resolve(a)})["catch"](function(a){console.log("Encountered error in Create tag operation. Error Message : ",a.info),f.reject(a)}),f.promise},updateTagDescription:function(a,b){var c={name:a,description:b},d=new IBMUriBuilder(this.endpoint).append("tags").slash().append(a).toString(),e={data:JSON.stringify(c),handleAs:"json",contentType:"json",timeout:3e4},f=Q.defer();return IBMHttpRequest.put(d,e,this.req).then(function(a){console.log("Successfully completed the Update tag operation"),f.resolve(a)})["catch"](function(a){console.log("Encountered error in Update tag operation. Error message : ",a.info),f.reject(a)}),f.promise},getTags:function(){var a=Q.defer(),b=new IBMUriBuilder(this.endpoint).append("tags").toString(),c={timeout:3e4};return IBMHttpRequest.get(b,c,this.req).then(function(b){var c=JSON.parse(b);if(c)for(var d in c.tags)delete c.tags[d].href;console.log("Successfully completed the Get tags operation"),a.resolve(c)})["catch"](function(b){console.log("Encountered error in Get tags operation. Error message : ",b.info),a.reject(b)}),a.promise},getTagDetail:function(a){var b=Q.defer(),c=new IBMUriBuilder(this.endpoint).append("tags").slash().append(a).toString(),d={timeout:3e4};return IBMHttpRequest.get(c,d,this.req).then(function(a){var c=JSON.parse(a);console.log("Successfully completed the Get tag detail operation"),b.resolve(c)})["catch"](function(a){console.log("Encountered error in Get tag detail operation. Error message : ",a.info),b.reject(a)}),b.promise},deleteTag:function(a){var b=Q.defer(),c=new IBMUriBuilder(this.endpoint).append("tags").slash().append(a).toString(),d={timeout:3e4};return IBMHttpRequest.del(c,d,this.req).then(function(){console.log("Successfully completed the delete tag operation"),b.resolve()})["catch"](function(a){console.log("Encountered error in Delete tag operation. Error message : ",a.info),b.reject(a)}),b.promise},sendNotificationByTags:function(a,b,c){var d=Q.defer(),e=new IBMUriBuilder(this.endpoint).append("messages").toString(),f={};f.message=a,f.target={tagNames:b},f.settings=c;var g={data:JSON.stringify(f),handleAs:"json",contentType:"json",timeout:3e4};return IBMHttpRequest.post(e,g,this.req).then(function(a){console.log("Successfully completed the Send notification operation"),d.resolve(a)})["catch"](function(a){console.log("Encountered error in send notification operation. Error message :",a.info),d.reject(a)}),d.promise},sendNotificationByDeviceIds:function(a,b,c){var d=Q.defer(),e=new IBMUriBuilder(this.endpoint).append("messages").toString(),f={};f.message=a,f.target={deviceIds:b},f.settings=c;var g={data:JSON.stringify(f),handleAs:"json",contentType:"json",timeout:3e4};return IBMHttpRequest.post(e,g,this.req).then(function(a){console.log("Successfully completed the Send notification operation"),d.resolve(a)})["catch"](function(a){console.log("Encountered error in send notification operation. Error message : ",a.info),d.reject(a)}),d.promise},sendNotificationByPlatform:function(a,b,c){var d=Q.defer(),e=new IBMUriBuilder(this.endpoint).append("messages").toString(),f={};f.message=a,f.target={platforms:b},f.settings=c;var g={data:JSON.stringify(f),handleAs:"json",contentType:"json",timeout:3e4};return IBMHttpRequest.post(e,g,this.req).then(function(a){console.log("Successfully completed the Send notification operation"),d.resolve(a)})["catch"](function(a){console.log("Encountered error in send notification operation. Error message : ",a.info),d.reject(a)}),d.promise},sendNotificationByConsumerId:function(a,b,c){var d=Q.defer(),e=new IBMUriBuilder(this.endpoint).append("messages").toString(),f={};f.message=a,f.target={consumerIds:b},f.settings=c;var g={data:JSON.stringify(f),handleAs:"json",contentType:"json",timeout:3e4};return IBMHttpRequest.post(e,g,this.req).then(function(a){console.log("Successfully completed the Send notification operation"),d.resolve(a)})["catch"](function(a){console.log("Encountered error in send notification operation. Error message : ",a.info),d.reject(a)}),d.promise},sendBroadcastNotification:function(a,b){var c=Q.defer(),d=new IBMUriBuilder(this.endpoint).append("messages").toString(),e={};e.message=a,e.target={},e.settings=b;var f={data:JSON.stringify(e),handleAs:"json",contentType:"json",timeout:3e4};return IBMHttpRequest.post(d,f,this.req).then(function(a){console.log("Successfully completed the Send notification operation"),c.resolve(a)})["catch"](function(a){console.log("Encountered error in send notification operation. Error message : ",a.infos),c.reject(a)}),c.promise},setEnvironment:function(a){var b={environment:a},c=this.endpoint,d={data:JSON.stringify(b),handleAs:"json",contentType:"json",timeout:3e4},e=Q.defer();return IBMHttpRequest.put(c,d,this.req).then(function(a){console.log("Successfully completed the Set environment operation"),e.resolve(a)})["catch"](function(a){console.log("Encountered error in Setting the environment mode. Error message : ",a.info),e.reject(a)}),e.promise},getEnvironment:function(){var a=this.endpoint,b=Q.defer(),c={timeout:3e4};return IBMHttpRequest.get(a,c,this.req).then(function(a){console.log("Successfully completed the get environment operation");var c=JSON.parse(a);b.resolve(c)})["catch"](function(a){console.log("Encountered error in getting the environment mode. Error message : ",a.info),b.reject(a)}),b.promise},setGCMCredentials:function(a,b,c){var d={apiKey:b,senderId:c,environment:a},e=new IBMUriBuilder(this.endpoint).append("settings").slash().append("gcmConf").toString(),f={data:JSON.stringify(d),handleAs:"json",contentType:"json",timeout:3e4},g=Q.defer();return IBMHttpRequest.put(e,f,this.req).then(function(a){console.log("Successfully completed the Set GCM credentials operation"),g.resolve(a)})["catch"](function(a){console.log("Encountered error in Setting the GCM credentials. Error message : ",a.info),g.reject(a)}),g.promise},getGCMCredentials:function(a){var b=new IBMUriBuilder(this.endpoint).append("settings").slash().append("gcmConf").toString();null!=a&&(b=b+"?environment="+a);var c=Q.defer(),d={timeout:3e4};return IBMHttpRequest.get(b,d,this.req).then(function(a){console.log("Successfully completed the get GCM credentials operation");var b=JSON.parse(a);c.resolve(b)})["catch"](function(a){console.log("Encountered error in getting the GCM credentials. Error message : ",a.info),c.reject(a)}),c.promise},setAPNSCredentials:function(a,b,c){var d=new IBMUriBuilder(this.endpoint).append("settings").slash().append("apnsConf").toString(),e={certificate:b,password:c,environment:a},f=Q.defer(),g={data:e,contentType:"multipart",timeout:3e4};return IBMHttpRequest.put(d,g,this.req).then(function(a){console.log("Successfully completed the set APNS credentials operation");var b=JSON.parse(a);f.resolve(b)})["catch"](function(a){console.log("Encountered error in setting the APNS credentials. Error message : ",a.info),f.reject(a)}),f.promise},getAPNSCredentials:function(a){var b=new IBMUriBuilder(this.endpoint).append("settings").slash().append("apnsConf").toString();null!=a&&(b=b+"?environment="+a);var c=Q.defer(),d={timeout:3e4};return IBMHttpRequest.get(b,d,this.req).then(function(a){console.log("Successfully completed the get APNS credentials operation");var b=JSON.parse(a);c.resolve(b)})["catch"](function(a){console.log("Encountered error in getting the APNS credentials. Error message : ",a.info),c.reject(a)}),c.promise}},d}),d("ibm/mobile/service/IBMPush",["require","exports","module","./_IBMPush","./push/IBMPushService"],function(a,c,d,e,f){var g=function(a,b,c,d,e){if("undefined"==typeof IBMBluemix||"undefined"==typeof Q||"undefined"==typeof _||"undefined"==typeof IBMHttpRequest)throw new Error("IBMBluemix has not been initialised");var f=_.extend({},d,{_init:function(a){this.logger=IBMLogger.getLogger(),this.logger.debug("IBMPush: initializing version: "+this.getVersion());var b=new e(a);return this._push=b,b}});return f}.call(this,a,c,d,e,f),h=b.IBMPush;return b.IBMPush=g,g.noConflict=function(){return b.IBMPush=h,g},g}),c("ibm/mobile/service/IBMPush")});return c?define(e):d?module.exports=e():e()}).call(this,"object"==typeof exports?global:window,"object"==typeof exports?global:window);